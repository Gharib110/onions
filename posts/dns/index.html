<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>DNS and Certificate</title>
	
	
	<link rel="stylesheet" href="/css/style.css">
	
	
</head>
<body>
	<header>
	==========================<br>
	== <a href="https://onions.ir/">Gharib Personal Blog</a> ==<br>
	==========================
	<div style="float: right;">A Techi Personal Blog</div><br>
	<p>
	<nav>
			<a href="/"><b>Start</b></a>.
			
			
			<a href="/posts/"><b>Posts</b></a>.
			
			<a href="/categories/"><b>Categories</b></a>.
			
			<a href="/tags/"><b>Tags</b></a>.
			
	</nav>
	</p>
	
</header>

	
	<main>
		<article>
			<h1>DNS and Certificate</h1>
			<b><time>01.01.0001 00:00</time></b>
		       
		           <a href="/tags/dns-acme.sh-tls">dns, acme.sh, tls</a>
        	       

			<div>
				<h1 id="acquiring-tls-certificate-and-key">Acquiring TLS Certificate and Key</h1>
<p>If you want to run a website that supports HTTPS you should get tls certificate for it. I will not delve into the
technical things behind the TLS and HTTPS protocol. Just Acquiring Free 3-months certificate.</p>
<ul>
<li>Clone this repo <a href="https://github.com/acmesh-official/acme.sh">acme.sh</a> and <code>cd</code> to that directory.</li>
<li>Run <code>acme.sh  --issue --server letsencrypt -d 'qharib.ir' --dns --yes-I-know-dns-manual-mode-enough-go-ahead-please</code></li>
<li>Follow the instructions to add the respective TXT record</li>
<li>Run again with <code>--renew</code> except the <code>--issue</code> flag</li>
<li>It is ready under <code>~/.acme.sh</code> directory</li>
</ul>
<h1 id="running-doh-plain-dns-and-dot">Running DOH, Plain DNS, and DOT</h1>
<p>I use Adguard Home.</p>
<ul>
<li>Run <code>wget --no-verbose -O - https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v</code></li>
<li>It will download everything that is necessary</li>
<li>Just follow the instruction to access the panel on your localhost and modify its settings</li>
</ul>
<h1 id="running-dns-proxy">Running dns-proxy</h1>
<p>We use Adguard Dns-Proxy tool to proxify our dns queries through DOH.</p>
<ul>
<li>Install it from <a href="https://github.com/AdguardTeam/dnsproxy">this_link</a></li>
<li>Extract it and run it using the following command or adjust it based on the description of the Project</li>
<li>See the complete guide in the project directory, it is thorough and simple ;)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dnsproxy -l &lt;public_ip_of_vps&gt; -p <span style="color:#ae81ff">53</span> --https-port<span style="color:#f92672">=</span><span style="color:#ae81ff">443</span> --tls-crt<span style="color:#f92672">=</span>/path/crt.crt --tls-key<span style="color:#f92672">=</span>/path/key.pkcs8.pem -u https://dnsoverhttps.doh/dns-query  -b 8.8.8.8:53
</span></span></code></pre></div>
			</div>
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/ai/">AI Tools</a></li>
				
				<li><a href="/posts/onions6/">Onion Links</a></li>
				
				<li><a href="/posts/osint5/">Android Sec</a></li>
				
				<li><a href="/posts/osint6/">App Sec</a></li>
				
				<li><a href="/posts/osint7/">Capture The Flag</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2024 <a href="https://onions.ir/"><b>Alireza Gharib. All right reserved</b></a>.
	<a href="https://github.com/Gharib110"><b>Github</b></a>.
	</p>
</footer>

</body>
</html>
